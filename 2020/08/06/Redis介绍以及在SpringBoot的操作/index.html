<!DOCTYPE html>


  <html class="light page-name">


<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Redis介绍以及在SpringBoot的操作 | Hexo</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="redis,">
  

  <meta name="description" content="redis 性能利器。 将操作存入内存中。（当对数据库的操作，比如查询，内存中没有的时候会访问数据库，最后将该操作存入内存中，在内存中读取比io读取流快很多） 使用键值对进行存储。（key - value）redis底层介绍简述 Java与redis连接的驱动主流的Jedis Spring提供RedisConnectionFactory接口→通过它可以生成RedisConnection接口对象→R">
<meta name="keywords" content="redis">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis介绍以及在SpringBoot的操作">
<meta property="og:url" content="http://yoursite.com/2020/08/06/Redis介绍以及在SpringBoot的操作/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="redis 性能利器。 将操作存入内存中。（当对数据库的操作，比如查询，内存中没有的时候会访问数据库，最后将该操作存入内存中，在内存中读取比io读取流快很多） 使用键值对进行存储。（key - value）redis底层介绍简述 Java与redis连接的驱动主流的Jedis Spring提供RedisConnectionFactory接口→通过它可以生成RedisConnection接口对象→R">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/image/2020_8_6_1.png">
<meta property="og:updated_time" content="2020-08-06T15:52:22.979Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redis介绍以及在SpringBoot的操作">
<meta name="twitter:description" content="redis 性能利器。 将操作存入内存中。（当对数据库的操作，比如查询，内存中没有的时候会访问数据库，最后将该操作存入内存中，在内存中读取比io读取流快很多） 使用键值对进行存储。（key - value）redis底层介绍简述 Java与redis连接的驱动主流的Jedis Spring提供RedisConnectionFactory接口→通过它可以生成RedisConnection接口对象→R">
<meta name="twitter:image" content="http://yoursite.com/image/2020_8_6_1.png">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38189205-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

</head>
</html>
<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/archives/" rel="noopener noreferrer" target="_self">
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/tag/" rel="noopener noreferrer" target="_self">
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/category/" rel="noopener noreferrer" target="_self">
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/link/" rel="noopener noreferrer" target="_self">
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/about/" rel="noopener noreferrer" target="_self">
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/atom.xml" rel="noopener noreferrer" target="_blank">
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a class="CIRCLE" href="/search/" rel="noopener noreferrer" target="_self">
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#redis"><span class="toc-text">redis</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#redis底层介绍"><span class="toc-text">redis底层介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#简述"><span class="toc-text">简述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现"><span class="toc-text">实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码简述"><span class="toc-text">代码简述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试"><span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis在SpringBoot的操作"><span class="toc-text">Redis在SpringBoot的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#配置"><span class="toc-text">配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#主操作"><span class="toc-text">主操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对数据类型的操作"><span class="toc-text">对数据类型的操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试-1"><span class="toc-text">测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#set的测试"><span class="toc-text">set的测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list的测试"><span class="toc-text">list的测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map与string的测试"><span class="toc-text">map与string的测试</span></a></li></ol></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="name-Redis介绍以及在SpringBoot的操作" class="article article-type-name" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">Redis介绍以及在SpringBoot的操作</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2020.08.06</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>lxlandzyq</span>
        </span>
      

      


      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <h1 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h1><ul>
<li>性能利器。</li>
<li>将操作存入内存中。（当对数据库的操作，比如查询，内存中没有的时候会访问数据库，最后将该操作存入内存中，在内存中读取比io读取流快很多）</li>
<li>使用键值对进行存储。（key - value）<h1 id="redis底层介绍"><a href="#redis底层介绍" class="headerlink" title="redis底层介绍"></a>redis底层介绍</h1><h2 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h2></li>
<li><strong>Java</strong>与<strong>redis</strong>连接的驱动主流的<strong>Jedis</strong></li>
<li>Spring提供RedisConnectionFactory接口→通过它可以生成<strong>RedisConnection接口对象</strong>→RedisConnection接口对象对Redis底层接口的封装进行操作。（本次使用的为Jedis驱动，那么就会提供RedisConnection接口的实现类JedisConnection去封装原有的Jedis）</li>
<li>图展示<br><img src="/image/2020_8_6_1.png" alt></li>
<li><strong>RedisTemplate</strong>其会自动从RedisConnectionFactory获取连接，对redis进行操作，使用最频繁。<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2>在pom.xml添加依赖<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">    &lt;exclusions&gt;</span><br><span class="line">    &lt;!--不依赖redis的异步客户端--&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;groupId&gt;io.lettuce&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;</span><br><span class="line">        &lt;/exclusion&gt;</span><br><span class="line">    &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--引入redis的客户驱动jedis--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>Redis进行配置，并设置连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package com.springboot.chapter7.config;</span><br><span class="line"></span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line">import org.springframework.data.redis.connection.RedisStandaloneConfiguration;</span><br><span class="line">import org.springframework.data.redis.connection.jedis.JedisConnectionFactory;</span><br><span class="line">import org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line">import org.springframework.data.redis.serializer.RedisSerializer;</span><br><span class="line">import redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class RedisConfig &#123;</span><br><span class="line">    private RedisConnectionFactory connectionFactory = null; //用于连接</span><br><span class="line"></span><br><span class="line">    @Bean(name = &quot;RedisConnectionFactory&quot;)</span><br><span class="line">    public RedisConnectionFactory initConnectionFactory()&#123;</span><br><span class="line">        if(this.connectionFactory != null)&#123;</span><br><span class="line">            return this.connectionFactory;</span><br><span class="line">        &#125;</span><br><span class="line">        JedisPoolConfig poolConfig = new JedisPoolConfig(); //java与Redis的链接驱动Jedis的配置</span><br><span class="line">        //最大空闲数</span><br><span class="line">        poolConfig.setMaxIdle(30);</span><br><span class="line">        //最大连接数</span><br><span class="line">        poolConfig.setMaxTotal(50);</span><br><span class="line">        //最大等待毫秒数</span><br><span class="line">        poolConfig.setMaxWaitMillis(2000);</span><br><span class="line">        //创建Jedis连接工厂</span><br><span class="line">        JedisConnectionFactory connectionFactory = new JedisConnectionFactory(poolConfig); //JedisConnectionFactory的实现类</span><br><span class="line">        //配置redis连接服务器</span><br><span class="line">        RedisStandaloneConfiguration rscfg = connectionFactory.getStandaloneConfiguration();</span><br><span class="line">        rscfg.setHostName(&quot;192.168.1.4&quot;);</span><br><span class="line">        rscfg.setPassword(&quot;123456&quot;);</span><br><span class="line">        rscfg.setPort(6379);</span><br><span class="line">        this.connectionFactory =connectionFactory;</span><br><span class="line">        return connectionFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean(&quot;redisTemplate&quot;)</span><br><span class="line">    public RedisTemplate&lt;Object,Object&gt; initRedisTemplate()&#123;</span><br><span class="line">        RedisTemplate&lt;Object,Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();</span><br><span class="line">        //RedisTemplate会自动初始化StringRedisSerializer所以这里直接获取</span><br><span class="line">        RedisSerializer serializer = redisTemplate.getStringSerializer();</span><br><span class="line">        //设置字符串序列其，这样spring就会把redis的key当做字符串处理</span><br><span class="line">        redisTemplate.setKeySerializer(serializer);</span><br><span class="line">        redisTemplate.setHashKeySerializer(serializer);</span><br><span class="line">        redisTemplate.setHashValueSerializer(serializer);</span><br><span class="line">        redisTemplate.setConnectionFactory(initConnectionFactory());</span><br><span class="line">        return redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.springboot.chapter7;</span><br><span class="line"></span><br><span class="line">import com.springboot.chapter7.config.RedisConfig;</span><br><span class="line">import org.apache.catalina.core.ApplicationContext;</span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line">import org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class Chapter7Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(RedisConfig.class); //构造自己的IoC容器</span><br><span class="line">        RedisTemplate redisTemplate = ctx.getBean(RedisTemplate.class);</span><br><span class="line">        redisTemplate.opsForValue().set(&quot;key2&quot;,&quot;value1&quot;);</span><br><span class="line">        redisTemplate.opsForHash().put(&quot;hash&quot;,&quot;field&quot;,&quot;hvalue&quot;);</span><br><span class="line">        SpringApplication.run(Chapter7Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="代码简述"><a href="#代码简述" class="headerlink" title="代码简述"></a>代码简述</h2><p>通过set(“key2”,”value1”)将字符串传入，Java是面向对象的编程语言，Redis是一种基于字符串存储的NoSQL，因此只要类实现了java.io.Serializable接口，就代表<strong>类的对象能够进行序列化</strong>，通过将类对象进行序列化能够得到二进制字符串，这样Redis就可以将这些类对象以字符串进行存储了。同时Java也可以将那些二进制字符串通过<strong>反序列化</strong>转为对象。<br>通过这个原理，Spring提供了在initRedisTemplate方法中的RedisSerializer接口，该接口有两个方法。</p>
<ul>
<li>可以将序列化对象转化为二进制</li>
<li>将二进制反序列转化为Java对象</li>
</ul>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>查看redis的路径，进入其目录下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/redis/redis-5.0.8/src/redis-cli -h localhost -p 6379 -a 123456</span><br></pre></td></tr></table></figure>

<ul>
<li>h为ip地址</li>
<li>p为端口</li>
<li>a为密码<br>输入命令，可以查看对应的值。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">localhost:6379&gt; get key2</span><br><span class="line">&quot;\xac\xed\x00\x05t\x00\x06value1&quot;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">localhost:6379&gt; hget hash field</span><br><span class="line">&quot;hvalue&quot;</span><br></pre></td></tr></table></figure>

<h1 id="Redis在SpringBoot的操作"><a href="#Redis在SpringBoot的操作" class="headerlink" title="Redis在SpringBoot的操作"></a>Redis在SpringBoot的操作</h1><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spring.redis.jedis.pool.max-idle=5</span><br><span class="line">spring.redis.jedis.pool.max-active=10</span><br><span class="line">spring.redis.jedis.pool.min-idle=10</span><br><span class="line">spring.redis.jedis.pool.max-wait=2000</span><br><span class="line">#配置Redis服务器属性</span><br><span class="line">spring.redis.port=6379</span><br><span class="line">spring.redis.host=192.168.1.4</span><br><span class="line">#redis连接超时时间，单位为毫秒</span><br><span class="line">spring.redis.timeout=1000</span><br></pre></td></tr></table></figure>

<h2 id="主操作"><a href="#主操作" class="headerlink" title="主操作"></a>主操作</h2><p>将其转化为字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package com.springboot.chapter7.main;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line">import org.springframework.data.redis.serializer.RedisSerializer;</span><br><span class="line"></span><br><span class="line">import javax.annotation.PostConstruct;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication(scanBasePackages = &quot;com.springboot.chapter7&quot;)</span><br><span class="line">public class Chapter7Application &#123;</span><br><span class="line"></span><br><span class="line">    //注入RedisTemplate</span><br><span class="line">    @Autowired</span><br><span class="line">    private RedisTemplate redisTemplate = null;</span><br><span class="line"></span><br><span class="line">    //定义自定义后初试方法</span><br><span class="line">    @PostConstruct</span><br><span class="line">    public void init()&#123;</span><br><span class="line">        initRedisTemplate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //设置redisTemplate的序列化器</span><br><span class="line">    private void initRedisTemplate()&#123;</span><br><span class="line">        RedisSerializer serializer = redisTemplate.getStringSerializer();//RedisTemplate会自定义一个StringRedisSerializer对象</span><br><span class="line">        redisTemplate.setKeySerializer(serializer);</span><br><span class="line">        redisTemplate.setHashKeySerializer(serializer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(Chapter7Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="对数据类型的操作"><a href="#对数据类型的操作" class="headerlink" title="对数据类型的操作"></a>对数据类型的操作</h2><p>注释已经介绍很详细</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">package com.springboot.chapter7.controller;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.data.redis.core.*;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line">import redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Map;</span><br><span class="line">import java.util.Set;</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/redis&quot;)</span><br><span class="line">    public class RedisController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private RedisTemplate redisTemplate = null;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private StringRedisTemplate stringRedisTemplate = null;</span><br><span class="line"></span><br><span class="line">    //操作redis字符串和散列数据类型</span><br><span class="line">    @RequestMapping(&quot;/stringAndHash&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public Map&lt;String,Object&gt; testStringAndHash()&#123;</span><br><span class="line">        redisTemplate.opsForValue().set(&quot;key1&quot;,&quot;value1&quot;);</span><br><span class="line">        //注意这里使用了JDK的序列器，所以Redis服务器保存的不是整数，不能运算</span><br><span class="line">        redisTemplate.opsForValue().set(&quot;int_key&quot;,1);</span><br><span class="line">        //克服不能运算的问题，利用StringRedisTemplate就可以克服这个问题</span><br><span class="line">        stringRedisTemplate.opsForValue().set(&quot;int&quot;,&quot;1&quot;);</span><br><span class="line">        //使用运算</span><br><span class="line">        stringRedisTemplate.opsForValue().increment(&quot;int&quot;,1);</span><br><span class="line">        //因为RedisTemplate不支持redis的所有命令，所以获取底层Jedis连接，利用其进行操作</span><br><span class="line">        Jedis jedis = (Jedis)stringRedisTemplate.getConnectionFactory().getConnection().getNativeConnection();</span><br><span class="line">        //减一操作，这个命令RedisTemplate不支持，所以先获取底层的连接等操作</span><br><span class="line">        jedis.decr(&quot;int&quot;);</span><br><span class="line">        Map&lt;String,String&gt; hash = new HashMap&lt;String,String&gt;();</span><br><span class="line">        hash.put(&quot;field1&quot;,&quot;value1&quot;);</span><br><span class="line">        hash.put(&quot;field2&quot;,&quot;value2&quot;);</span><br><span class="line">        //存入一个散列数据类型</span><br><span class="line">        stringRedisTemplate.opsForHash().putAll(&quot;hash&quot;,hash);</span><br><span class="line">        //新增一个字段</span><br><span class="line">        stringRedisTemplate.opsForHash().put(&quot;hash&quot;,&quot;field3&quot;,&quot;value3&quot;);</span><br><span class="line">        //绑定散列操作的key，这样可以联系对同一个散列数据类型进行操作</span><br><span class="line">        BoundHashOperations hashOperations = stringRedisTemplate.boundHashOps(&quot;hash&quot;);</span><br><span class="line">        //删除两个字段</span><br><span class="line">        hashOperations.delete(&quot;field1&quot;,&quot;field2&quot;);</span><br><span class="line">        //新增第一个字段</span><br><span class="line">        hashOperations.put(&quot;field4&quot;,&quot;value4&quot;);</span><br><span class="line">        Map&lt;String,Object&gt; map = new HashMap&lt;String, Object&gt;();</span><br><span class="line">        map.put(&quot;success&quot;,true);</span><br><span class="line">        return map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //使用Spring操作列表（链表）</span><br><span class="line">    @RequestMapping(&quot;/list&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public Map&lt;String,Object&gt; testList()&#123;</span><br><span class="line"></span><br><span class="line">        //插入两个列表，注意它们在链表的顺序</span><br><span class="line">        //链表从右到左的顺序，v10,v8,v6,v4,v2</span><br><span class="line">        stringRedisTemplate.opsForList().leftPushAll(</span><br><span class="line">        &quot;list1&quot;,&quot;v2&quot;,&quot;v4&quot;,&quot;v6&quot;,&quot;v8&quot;,&quot;v10&quot;</span><br><span class="line">        );</span><br><span class="line">        //从左到右</span><br><span class="line">        stringRedisTemplate.opsForList().leftPushAll(</span><br><span class="line">        &quot;list2&quot;,&quot;v1&quot;,&quot;v2&quot;,&quot;v3&quot;,&quot;v4&quot;,&quot;v5&quot;,&quot;v6&quot;</span><br><span class="line">        );</span><br><span class="line">        //绑定list2操作</span><br><span class="line">        BoundListOperations listOperations = stringRedisTemplate.boundListOps(&quot;list2&quot;);</span><br><span class="line">        //从右边弹出一个成员</span><br><span class="line">        Object result1 = listOperations.rightPop();</span><br><span class="line">        //获取坐标，从0开始，所以这个值为v2</span><br><span class="line">        Object result2 = listOperations.index(1);</span><br><span class="line">        //从左边插入链表</span><br><span class="line">        listOperations.leftPush(&quot;v0&quot;);</span><br><span class="line">        //求链表长度</span><br><span class="line">        Long size = listOperations.size();</span><br><span class="line">        //求链表下标区间成员，整个链表下标范围为0到size-1，这里不取最后一个元素</span><br><span class="line">        List elements = listOperations.range(0,size-2);</span><br><span class="line">        Map&lt;String ,Object&gt; map = new HashMap&lt;String, Object&gt;();</span><br><span class="line">        map.put(&quot;success&quot;,true);</span><br><span class="line">        return map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //使用Spring操作集合</span><br><span class="line">    @RequestMapping(&quot;/set&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public Map&lt;String,Object&gt; testSet()&#123;</span><br><span class="line">        stringRedisTemplate.opsForSet().add(&quot;set1&quot;,&quot;v1&quot;,&quot;v1&quot;,&quot;v2&quot;,&quot;v3&quot;,&quot;v4&quot;,&quot;v6&quot;,&quot;v7&quot;);</span><br><span class="line">        stringRedisTemplate.opsForSet().add(&quot;set2&quot;,&quot;v2&quot;,&quot;v4&quot;,&quot;v6&quot;,&quot;v8&quot;);</span><br><span class="line">        //绑定Set1集合操作</span><br><span class="line">        BoundSetOperations setOperations = stringRedisTemplate.boundSetOps(&quot;set1&quot;);</span><br><span class="line">        //增加两个元素</span><br><span class="line">        setOperations.add(&quot;v6&quot;,&quot;v8&quot;);</span><br><span class="line">        //删除两个元素</span><br><span class="line">        setOperations.remove(&quot;v1&quot;,&quot;v7&quot;);</span><br><span class="line">        //返回所有元素</span><br><span class="line">        Set set = setOperations.members();</span><br><span class="line">        //成员数</span><br><span class="line">        Long size = setOperations.size();</span><br><span class="line">        //求交集</span><br><span class="line">        Set inter = setOperations.intersect(&quot;set2&quot;);</span><br><span class="line">        //求交集，并用新集合inter保存</span><br><span class="line">        setOperations.intersectAndStore(&quot;set2&quot;,&quot;inter&quot;);</span><br><span class="line">        //求差集</span><br><span class="line">        Set diff = setOperations.diff(&quot;set2&quot;);</span><br><span class="line">        //求差集，并保存到diff</span><br><span class="line">        setOperations.diffAndStore(&quot;set2&quot;,&quot;diff&quot;);</span><br><span class="line">        //求并集</span><br><span class="line">        Set union = setOperations.union(&quot;set2&quot;);</span><br><span class="line">        //并保存</span><br><span class="line">        setOperations.unionAndStore(&quot;set2&quot;,&quot;union&quot;);</span><br><span class="line">        Map&lt;String,Object&gt; map = new HashMap&lt;String, Object&gt;();</span><br><span class="line">        map.put(&quot;Success&quot;,true);</span><br><span class="line">        return map;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h2><h3 id="set的测试"><a href="#set的测试" class="headerlink" title="set的测试"></a>set的测试</h3><ul>
<li>进入链接<a href="http://localhost:8080/redis/set" target="_blank" rel="noopener">http://localhost:8080/redis/set</a></li>
<li>返回值{“Success”:true} </li>
<li>查看，获取到相关内容<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">localhost:6379&gt; smembers set1</span><br><span class="line">1) &quot;v8&quot;</span><br><span class="line">2) &quot;v6&quot;</span><br><span class="line">3) &quot;v3&quot;</span><br><span class="line">4) &quot;v4&quot;</span><br><span class="line">5) &quot;v2&quot;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="list的测试"><a href="#list的测试" class="headerlink" title="list的测试"></a>list的测试</h3><ul>
<li>进入链接<a href="http://localhost:8080/redis/list" target="_blank" rel="noopener">http://localhost:8080/redis/list</a></li>
<li>返回值{“success”:true}</li>
<li>查看<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">localhost:6379&gt; lrange list2 0 -1</span><br><span class="line">1) &quot;v0&quot;</span><br><span class="line">2) &quot;v6&quot;</span><br><span class="line">3) &quot;v5&quot;</span><br><span class="line">4) &quot;v4&quot;</span><br><span class="line">5) &quot;v3&quot;</span><br><span class="line">6) &quot;v2&quot;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="map与string的测试"><a href="#map与string的测试" class="headerlink" title="map与string的测试"></a>map与string的测试</h3><ul>
<li><p>进入链接<a href="http://localhost:8080/redis/stringAndHash" target="_blank" rel="noopener">http://localhost:8080/redis/stringAndHash</a></p>
</li>
<li><p>返回值{“success”:true}</p>
</li>
<li><p>map查看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">localhost:6379&gt; hgetall hash</span><br><span class="line">1) &quot;field&quot;</span><br><span class="line">2) &quot;hvalue2&quot;</span><br><span class="line">3) &quot;field3&quot;</span><br><span class="line">4) &quot;value3&quot;</span><br><span class="line">5) &quot;field4&quot;</span><br><span class="line">6) &quot;value4&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>string</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">localhost:6379&gt; get int</span><br><span class="line">&quot;1&quot;</span><br></pre></td></tr></table></figure>

</li>
</ul>

    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持forsigner</div>
        <ul>
        
          <li class="item">
            
              <span>微信扫一扫</span>
            
            <img src="/images/qr-wechat.png" alt>
          </li>
        
          <li class="item">
            
              <span>支付宝扫一扫</span>
            
            <img src="/images/qr-alipay.png" alt>
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2020/08/05/Spring-Boot-MyBatis-操作数据库/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2020/10/11/leetcode-49/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/archives/" rel="noopener noreferrer" target="_self">
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/tag/" rel="noopener noreferrer" target="_self">
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/category/" rel="noopener noreferrer" target="_self">
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/link/" rel="noopener noreferrer" target="_self">
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/about/" rel="noopener noreferrer" target="_self">
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/atom.xml" rel="noopener noreferrer" target="_blank">
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a class="CIRCLE" href="/search/" rel="noopener noreferrer" target="_self">
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-name">
    

    

    
    

    

    
    

    

<!-- Gitalk评论插件通用代码 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '277317290454635afa73',
  clientSecret: '78223c859304da5e8d71bfce136d436c6ff95c37',
  repo: 'blog-comment',
  owner: 'forsigner',
  // 在这里设置一下截取前50个字符串, 这是因为 github 对 label 的长度有了要求, 如果超过
  // 50个字符串则会报错.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: location.pathname,
  admin: ['forsigner'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalk代码结束 -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
